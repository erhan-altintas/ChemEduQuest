<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>ChemEduQuest - Quiz Modus</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f2f5;
            text-align: center;
            padding: 20px;
        }
        .container {
            display: grid;
            grid-template-columns: repeat(18, 1fr);
            gap: 5px;
            max-width: 1200px;
            margin: 20px auto;
        }
        .element {
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            font-weight: bold;
            cursor: pointer;
            user-select: none;
        }
        .element:hover {
            background-color: #eef;
        }
        .element.selected {
            background-color: #b3e5fc;
            border-color: #0288d1;
        }
        .element.disabled {
            background-color: #eee;
            color: #999;
            border-color: #ccc;
            pointer-events: none;
        }
        #submitButton {
            margin-top: 15px;
            padding: 10px 20px;
            font-size: 16px;
            background-color: #0288d1;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        #quizInfo {
            display: flex;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto 20px;
            font-size: 18px;
        }
        #timer, #lives, #score {
            background-color: #fff;
            padding: 10px 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        #question {
            font-size: 20px;
            margin-bottom: 20px;
            background-color: #fff;
            padding: 15px;
            border-radius: 5px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }
        #result {
            margin-top: 20px;
            font-size: 18px;
            min-height: 50px;
        }
        .life {
            color: red;
            font-size: 24px;
            margin: 0 3px;
        }
        #startScreen, #endScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            color: white;
        }
        .screen-content {
            background-color: #333;
            padding: 30px;
            border-radius: 10px;
            max-width: 600px;
            text-align: center;
        }
        .screen-button {
            margin-top: 20px;
            padding: 12px 25px;
            font-size: 18px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        #correctAnswer {
            font-weight: bold;
            color: #4CAF50;
        }
    </style>
</head>
<body>
<div id="startScreen">
    <div class="screen-content">
        <h1>Chemische Combinaties Quiz</h1>
        <p>Test je kennis van chemische combinaties!</p>
        <p>Je krijgt een stof te zien en moet de juiste elementen selecteren.</p>
        <p>Je hebt 3 levens en 30 seconden per vraag. Hoe meer vragen je correct beantwoordt, hoe hoger je score!</p>
        <button class="screen-button" id="startButton">Start Quiz</button>
    </div>
</div>

<div id="quizArea" style="display: none;">
    <h1>Chemische Combinaties Quiz</h1>

    <div id="quizInfo">
        <div id="timer">Tijd: 30s</div>
        <div id="score">Score: 0</div>
        <div id="lives">Levens: <span class="life">â™¥</span><span class="life">â™¥</span><span class="life">â™¥</span></div>
    </div>

    <div id="question">Vraag zal hier verschijnen...</div>

    <div class="container" id="elementGrid"></div>

    <button id="submitButton">Bevestigen</button>

    <div id="result"></div>
</div>

<div id="endScreen" style="display: none;">
    <div class="screen-content">
        <h1>Quiz Voltooid!</h1>
        <p id="finalScore">Je eindscore: 0</p>
        <p id="finalMessage">Goed gedaan!</p>
        <button class="screen-button" id="restartButton">Opnieuw Spelen</button>
    </div>
</div>

<script>
    // Elementen en combinaties
    const elements = ["H", "He", "Li", "Be", "B", "C", "N", "O", "F", "Ne", "Na", "Mg", "Al", "Si", "P", "S", "Cl", "Ar", "K", "Ca", "Sc", "Ti", "V", "Cr", "Mn", "Fe", "Co", "Ni", "Cu", "Zn", "Ga", "Ge", "As", "Se", "Br", "Kr", "Rb", "Sr", "Y", "Zr", "Nb", "Mo", "Tc", "Ru", "Rh", "Pd", "Ag", "Cd", "In", "Sn", "Sb", "Te", "I", "Xe", "Cs", "Ba", "Hf", "Ta", "W", "Re", "Os", "Ir", "Pt", "Au", "Hg", "Tl", "Pb", "Bi", "Po", "At", "Rn"];

    const combinations = {
        "H,O": {"name": "Water (Hâ‚‚O)"},
        "C,O": {"name": "Koolstofdioxide (COâ‚‚)"},
        "Na,Cl": {"name": "Keukenzout (NaCl)"},
        "Fe,O": {"name": "IJzeroxide (Feâ‚‚Oâ‚ƒ)"},
        "Fe,C": {"name": "Staal (Fe + C)"},
        "Cu,Zn": {"name": "Messing (CuZn)"},
        "H,N": {"name": "Ammoniak (NHâ‚ƒ)"},
        "C,H": {"name": "Methaan (CHâ‚„)"},
        "H,Cl": {"name": "Waterstofchloride (HCl)"},
        "Mg,O": {"name": "Magnesiumoxide (MgO)"},
        "K,Cl": {"name": "Kaliumchloride (KCl)"},
        "Zn,O": {"name": "Zinkoxide (ZnO)"},
        "Ag,Br": {"name": "Zilverbromide (AgBr)"},
        "Ti,O": {"name": "Titaandioxide (TiOâ‚‚)"},
        "C,H,O": {"name": "Glucose (Câ‚†Hâ‚â‚‚Oâ‚†)"},
        "Ca,C,O": {"name": "Calciumcarbonaat (CaCOâ‚ƒ)"},
        "N,H,O": {"name": "Salpeterzuur (HNOâ‚ƒ)"},
        "Na,H,C,O": {"name": "Natriumbicarbonaat (NaHCOâ‚ƒ)"},
        "Ba,O,S": {"name": "Bariumsulfaat (BaSOâ‚„)"},
        "Al,O": {"name": "Aluminiumoxide (Alâ‚‚Oâ‚ƒ)"},
        "Si,O": {"name": "Silica (SiOâ‚‚)"},
        "S,O": {"name": "Zwaveldioxide (SOâ‚‚)"},
        "Pb,O": {"name": "Loodoxide (PbO)"},
        "Hg,Cl": {"name": "Kwikchloride (HgClâ‚‚)"},
        "Au,Ag": {"name": "Elektrum (AuAg)"},
        "Ni,Cr": {"name": "Nichroom (NiCr)"},
        "Cu,Sn": {"name": "Brons (CuSn)"},
        "W,C": {"name": "Wolfraamcarbide (WC)"}
    };

    // Quiz variabelen
    let selected = [];
    let currentQuestion = {};
    let score = 0;
    let lives = 3;
    let timeLeft = 30;
    let timer;
    let questionsAnswered = 0;
    const totalQuestions = 10; // Aantal vragen per quiz

    // Elementen grid opbouwen
    const grid = document.getElementById("elementGrid");
    elements.forEach(el => {
        const div = document.createElement("div");
        div.className = "element";
        div.textContent = el;
        div.dataset.symbol = el;
        div.addEventListener("click", () => {
            if (div.classList.contains("disabled")) return;

            const symbol = div.dataset.symbol;
            const i = selected.indexOf(symbol);

            if (i > -1) {
                selected.splice(i, 1);
                div.classList.remove("selected");
            } else {
                selected.push(symbol);
                div.classList.add("selected");
            }
        });
        grid.appendChild(div);
    });

    // Startscherm
    document.getElementById("startButton").addEventListener("click", () => {
        document.getElementById("startScreen").style.display = "none";
        document.getElementById("quizArea").style.display = "block";
        startQuiz();
    });

    // Quiz functies
    function startQuiz() {
        score = 0;
        lives = 3;
        questionsAnswered = 0;
        updateScore();
        updateLives();
        nextQuestion();
    }

    function nextQuestion() {
        // Reset selectie
        selected = [];
        document.querySelectorAll(".element").forEach(el => {
            el.classList.remove("selected", "disabled");
        });

        // Kies een willekeurige combinatie
        const comboKeys = Object.keys(combinations);
        const randomKey = comboKeys[Math.floor(Math.random() * comboKeys.length)];
        currentQuestion = {
            answer: randomKey.split(","),
            name: combinations[randomKey].name
        };

        // Toon de vraag
        document.getElementById("question").textContent = `Welke elementen vormen ${currentQuestion.name}?`;

        // Start timer
        resetTimer();
        startTimer();
    }

    function startTimer() {
        clearInterval(timer);
        timeLeft = 30;
        updateTimer();
        timer = setInterval(() => {
            timeLeft--;
            updateTimer();
            if (timeLeft <= 0) {
                timeUp();
            }
        }, 1000);
    }

    function resetTimer() {
        clearInterval(timer);
        timeLeft = 30;
        updateTimer();
    }

    function updateTimer() {
        document.getElementById("timer").textContent = `Tijd: ${timeLeft}s`;
        if (timeLeft <= 10) {
            document.getElementById("timer").style.color = "red";
        } else {
            document.getElementById("timer").style.color = "black";
        }
    }

    function updateScore() {
        document.getElementById("score").textContent = `Score: ${score}`;
    }

    function updateLives() {
        const livesElement = document.getElementById("lives");
        livesElement.innerHTML = "Levens: ";
        for (let i = 0; i < 3; i++) {
            const heart = document.createElement("span");
            heart.className = "life";
            heart.textContent = i < lives ? "â™¥" : "â™¡";
            livesElement.appendChild(heart);
        }
    }

    function timeUp() {
        clearInterval(timer);
        document.getElementById("result").innerHTML = `Tijd is om! Het juiste antwoord was: <span id="correctAnswer">${currentQuestion.answer.join(" + ")}</span>`;
        loseLife();
    }

    // Bevestigingsknop
    document.getElementById("submitButton").addEventListener("click", () => {
        clearInterval(timer);
        checkAnswer();
    });

    function checkAnswer() {
        const userAnswer = [...selected].sort().join(",");
        const correctAnswer = [...currentQuestion.answer].sort().join(",");

        if (userAnswer === correctAnswer) {
            // Correct antwoord
            score += timeLeft; // Meer punten voor sneller antwoorden
            questionsAnswered++;
            document.getElementById("result").innerHTML = "Correct! ðŸŽ‰";
            updateScore();
        } else {
            // Fout antwoord
            document.getElementById("result").innerHTML = `Helaas, fout. Het juiste antwoord was: <span id="correctAnswer">${currentQuestion.answer.join(" + ")}</span>`;
            loseLife();
        }

        // Volgende vraag of eindig quiz
        if (lives > 0 && questionsAnswered < totalQuestions) {
            setTimeout(nextQuestion, 2000);
        } else {
            endQuiz();
        }
    }

    function loseLife() {
        lives--;
        updateLives();
        if (lives <= 0) {
            endQuiz();
        }
    }

    function endQuiz() {
        clearInterval(timer);
        document.getElementById("quizArea").style.display = "none";
        document.getElementById("endScreen").style.display = "flex";
        document.getElementById("finalScore").textContent = `Je eindscore: ${score}`;

        // Geef feedback op basis van score
        const maxScore = totalQuestions * 30; // Max 30 punten per vraag
        const percentage = (score / maxScore) * 100;
        let message = "";

        if (percentage >= 80) message = "Uitstekend! Je kent je chemische combinaties heel goed!";
        else if (percentage >= 60) message = "Goed gedaan! Met wat meer oefening word je nog beter!";
        else if (percentage >= 40) message = "Niet slecht, maar je kunt nog wat meer oefenen!";
        else message = "Blijf oefenen, je wordt vanzelf beter!";

        document.getElementById("finalMessage").textContent = message;
    }

    // Herstartknop
    document.getElementById("restartButton").addEventListener("click", () => {
        document.getElementById("endScreen").style.display = "none";
        document.getElementById("quizArea").style.display = "block";
        startQuiz();
    });
</script>
</body>
</html>